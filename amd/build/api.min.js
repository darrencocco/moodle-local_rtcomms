define("local_rtcomms/api",["core/pubsub","local_rtcomms/events"],(function(PubSub,RealTimeEvents){return document.listofchannels=[],{setImplementation:function(plugin){var totalchannels;if(document.delegatedplugin=plugin,document.listofchannels&&(totalchannels=document.listofchannels.length)>0)for(var i=0;i<totalchannels;i++){var channeltosub=document.listofchannels.shift();document.delegatedplugin.subscribe(channeltosub.context,channeltosub.component,channeltosub.area,channeltosub.itemid,channeltosub.fromid,channeltosub.fromtimestamp)}},subscribe:function(context,component,area,itemid){let callback=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,fromId=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,fromTimestamp=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(-1==fromId&&-1==fromTimestamp&&(fromTimestamp=(new Date).getTime()),this.getPlugin())this.getPlugin().subscribe(context,component,area,itemid,fromId,fromTimestamp);else{var channel={context:context,component:component,area:area,itemid:itemid,fromid:fromId,fromtimestamp:fromTimestamp};document.listofchannels.push(channel)}callback instanceof Function&&PubSub.subscribe(this.channelName(context,component,area,itemid),callback)},getPlugin:function(){return document.delegatedplugin},publish:function(message){PubSub.publish(this.channelName(message.context.id,message.component,message.area,message.itemid),message)},connectionFailure:function(){PubSub.publish(RealTimeEvents.CONNECTION_LOST,{})},channelName:function(context,component,area,itemid){return RealTimeEvents.EVENT+"/"+context+"/"+component+"/"+area+"/"+itemid}}}));

//# sourceMappingURL=api.min.js.map